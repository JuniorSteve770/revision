// src/projects/Project2/pages/Page2.js

import React, { useState, useEffect } from "react";
import "./Page.css";
// partie 
// Flashcards pour le niveau basic

const basicSlides = [

   {
    "question": "Quelles nouveaut√©s ont apport√© .NET 3.0 et .NET 3.5 ?",
    "answer": " .NET 3.0 (2006) introduit **WPF** (UI), **WCF** (services), **WF** (workflow) et **CardSpace** (identit√©). üìä .NET 3.5 (2007) apporte **LINQ** (requ√™tes int√©gr√©es au langage) et **ASP.NET AJAX** (web interactif)."
  },
  {
    "question": "Quelles √©volutions ont marqu√© .NET 4.0 et .NET 4.5 ?",
    "answer": " .NET 4.0 (2010) introduit **PLINQ** et la **Task Parallel Library** pour le **parall√©lisme**. ‚è≥ .NET 4.5 (2012) int√®gre **async/await** et **Web API** pour les applis web modernes asynchrones."
  },
  {
    "question": "Quelle est la diff√©rence entre .NET Framework et .NET Core ?",
    "answer": "**.NET Framework** : pour applis Windows legacy, ‚ùå modulaire, ‚ùå open source. üß© **.NET Core** : multiplateforme (Win/Linux/mac), ‚úÖ modulaire, ‚úÖ open source. Usage : d√©veloppement moderne avant .NET 5."
  },
  {
    "question": "Pourquoi .NET ‚â• 5 est-il recommand√© pour les projets r√©cents ?",
    "answer": " **.NET 5 et suivants** unifient toutes les plateformes (desktop, web, mobile, cloud), sont **modulaires**, **open source**, **cross-platform**, et **recommand√©s** pour tout nouveau projet."
  },
   {
    "question": "Qu'est-ce que Git et pourquoi est-il indispensable dans le d√©veloppement logiciel ?",
    "answer": " Git est un syst√®me de contr√¥le de version **distribu√©**. Il permet de suivre l‚Äôhistorique des modifications de code, collaborer avec d'autres d√©veloppeurs via des **branches**, fusionner des versions avec **merge**, et exp√©rimenter sans risquer le code principal. Exemple : un d√©veloppeur cr√©e une branche `feature-login`, code dessus, puis fusionne via une Pull Request. üîë Mots-cl√©s : commit, branche, merge, revert, versioning distribu√©."
  },
  {
    "question": "Qu'est-ce qu'un pipeline CI/CD et pourquoi est-il essentiel ?",
    "answer": " Un pipeline CI/CD est une **cha√Æne automatis√©e** qui permet de tester, compiler, et d√©ployer une application. CI = Continuous Integration : ex√©cution de tests unitaires/linting √† chaque commit. CD = Continuous Delivery/Deployment : d√©ploiement automatique vers staging/production. Exemple : GitHub Actions d√©clenche un build et un test d√®s qu‚Äôun push est fait sur `main`. üîë Concepts : jobs, steps, runners, artefacts, stages."
  },
  {
    "question": "Quelle est la diff√©rence entre GitHub Actions et GitLab CI/CD ?",
    "answer": " GitHub Actions est un outil d‚Äôautomatisation **int√©gr√© √† GitHub**, utilisant des fichiers `.yml` dans `.github/workflows/`. GitLab CI/CD repose sur un fichier `.gitlab-ci.yml`, avec une vue pipeline int√©gr√©e. GitLab permet des √©tapes conditionnelles complexes, GitHub est plus simple √† configurer pour les petits projets. üîë Mots-cl√©s : d√©clencheur (`on: push`), runner, cache, matrix build."
  },
  {
    "question": "Quels sont les composants d‚Äôun workflow GitHub Actions ?",
    "answer": " Un workflow GitHub Actions est compos√© de : **events** (d√©clencheurs : push, PR, cron), **jobs** (unit√©s d'ex√©cution), **steps** (commandes), **actions** (r√©utilisables). Exemple : un job nomm√© `test` contient 3 steps : `checkout`, `install`, `run tests`. üîë Syntaxe : YAML, environnement GitHub-hosted, secrets pour les tokens."
  },
  {
    "question": "Qu'est-ce qu'une API REST et pourquoi est-elle largement utilis√©e ?",
    "answer": " Une **API REST** repose sur le protocole **HTTP** et suit des conventions : chaque ressource (ex: /users/12) est accessible via des **verbes** (GET, POST, PUT, DELETE). Elle est **stateless** : chaque requ√™te contient toutes les informations n√©cessaires. Avantages : simple, lisible, compatible avec les navigateurs. Exemple : `GET /api/products` retourne une liste de produits au format JSON. üîë Mots-cl√©s : endpoint, URI, stateless, JSON, status code HTTP."
  },
  {
    "question": "Quelles sont les diff√©rences fondamentales entre REST, SOAP et gRPC ?",
    "answer": " **REST** : HTTP + JSON, simple √† consommer. **SOAP** : XML + WSDL, utilis√© dans les syst√®mes anciens (banques, ERP). **gRPC** : HTTP/2 + Protobuf, tr√®s rapide et compact, id√©al pour microservices internes. REST est mieux pour les APIs web publiques, gRPC pour l'interne haute performance. üîë Mots-cl√©s : Protobuf, stateless, contrat, XML vs JSON, compatibilit√© navigateur."
  },
  {
    "question": "Pourquoi utiliser gRPC dans une architecture microservices ?",
    "answer": " gRPC utilise **HTTP/2** et **Protocol Buffers**, ce qui permet une **communication binaire rapide**, du **streaming** bidirectionnel et une **v√©rification forte des types**. Il est id√©al dans un r√©seau d‚Äôentreprise entre microservices : login, panier, paiement. Exemple : `rpc Checkout (CartRequest) returns (PaymentStatus)` avec `.proto` g√©n√©r√© automatiquement. üîë Concepts : stub, service definition, contract first, streaming."
  },
  {
    "question": "Qu‚Äôest-ce qu‚Äôun fichier .proto en gRPC et √† quoi sert-il ?",
    "answer": " Le fichier `.proto` d√©finit le contrat du service gRPC. Il d√©crit les messages (`message`) et les appels (`rpc`) de mani√®re **typ√©e et structur√©e**, ensuite compil√© automatiquement pour g√©n√©rer du code client et serveur. üîë Exemple : `message User { int32 id = 1; string name = 2; }` suivi de `service UserService { rpc GetUser (UserRequest) returns (User); }`."
  },
   {
    "question": "Qu'est-ce que SQL et pourquoi est-il indispensable ?",
    "answer": " SQL est un **langage d√©claratif** qui permet de manipuler des bases de donn√©es relationnelles. Il permet d‚Äôeffectuer des requ√™tes (`SELECT`), ins√©rer des donn√©es (`INSERT`), modifier (`UPDATE`) et supprimer (`DELETE`). Exemple : `SELECT name FROM clients WHERE pays = 'France';` üîë Concepts : table, colonne, ligne, sch√©ma, CRUD."
  },
  {
    "question": "Qu'est-ce que le mod√®le relationnel dans une base de donn√©es ?",
    "answer": " Le mod√®le relationnel repose sur l'organisation des donn√©es en **tables**, li√©es entre elles par des **cl√©s √©trang√®res**. Chaque table repr√©sente une entit√© (ex: `users`, `orders`). üîë Avantage : coh√©rence, requ√™tes complexes avec `JOIN`, int√©grit√© des donn√©es. Exemple : `orders.user_id` r√©f√©rence `users.id`."
  },
  {
    "question": "Que signifie le principe ACID dans les bases de donn√©es relationnelles ?",
    "answer": " ACID = **Atomicit√©** (tout ou rien), **Coh√©rence** (respect des r√®gles), **Isolation** (pas de conflits entre transactions), **Durabilit√©** (les donn√©es sont persistantes m√™me apr√®s crash). Cela garantit l'int√©grit√© des transactions. Exemple : transfert bancaire entre deux comptes."
  },
  {
    "question": "Pourquoi PostgreSQL est-il souvent pr√©f√©r√© √† MySQL ou SQL Server ?",
    "answer": " PostgreSQL est **open source**, tr√®s **conforme au standard SQL**, offre des types avanc√©s (JSON, g√©odonn√©es), des index efficaces, des vues mat√©rialis√©es et un moteur transactionnel robuste. SQL Server est puissant mais propri√©taire. üîë Usage : syst√®mes critiques, data warehouses, projets cloud-first."
  },
  {
    "question": "Quel est le r√¥le des index en SQL ?",
    "answer": " Un **index** am√©liore les performances de lecture en acc√©l√©rant les recherches sur une ou plusieurs colonnes. Comparable √† l‚Äôindex d‚Äôun livre. Exemple : `CREATE INDEX idx_name ON clients(name);` üîë Types : B-tree (par d√©faut), Hash, GIN (PostgreSQL)."
  },


  
];
// QCM pour les niveaux moyen et avanc√©
const questions = {
  moyen: [
   {
    "question": "Quel est le r√¥le principal de Git dans un projet logiciel ?",
    "options": [
      "G√©rer les d√©ploiements automatiques",
      "Assurer la s√©curit√© du code source",
      "Suivre les modifications et versions du code",
      "Compiler les programmes"
    ],
    "answer": "Suivre les modifications et versions du code",
    "explanation": "Git est un syst√®me de versionnage distribu√© qui permet de suivre l‚Äô√©volution du code, g√©rer des branches et fusionner les modifications en toute s√©curit√©."
  },
  {
    "question": "Que signifie CI dans CI/CD ?",
    "options": [
      "Code Integration",
      "Continuous Integration",
      "Centralized Integration",
      "Checked Integration"
    ],
    "answer": "Continuous Integration",
    "explanation": "CI signifie 'Continuous Integration', un processus d‚Äôautomatisation permettant de tester et valider du code √† chaque modification dans le d√©p√¥t."
  },
  {
    "question": "Quel fichier d√©clenche les workflows dans GitHub Actions ?",
    "options": [
      ".gitlab-ci.yml",
      "docker-compose.yml",
      "workflow.json",
      ".github/workflows/*.yml"
    ],
    "answer": ".github/workflows/*.yml",
    "explanation": "Les workflows GitHub Actions sont d√©finis dans des fichiers YAML plac√©s dans le dossier `.github/workflows/`."
  },
  {
    "question": "Quel composant n'est pas propre √† un pipeline CI/CD ?",
    "options": [
      "Jobs",
      "Branches",
      "Stages",
      "Runners"
    ],
    "answer": "Branches",
    "explanation": "Les branches appartiennent √† Git, pas directement aux pipelines CI/CD qui se composent plut√¥t de jobs, stages et runners."
  },
  {
    "question": "Quelle est la diff√©rence entre GitHub Actions et GitLab CI/CD ?",
    "options": [
      "GitLab CI est uniquement pour Python",
      "GitHub Actions est propri√©taire de GitLab",
      "GitHub Actions est int√©gr√© √† GitHub, GitLab CI est int√©gr√© √† GitLab",
      "GitHub Actions ne permet pas le d√©ploiement"
    ],
    "answer": "GitHub Actions est int√©gr√© √† GitHub, GitLab CI est int√©gr√© √† GitLab",
    "explanation": "GitHub Actions fonctionne dans GitHub, tandis que GitLab CI/CD est natif de GitLab. Tous deux permettent tests et d√©ploiement via des fichiers YAML."
  },
  {
    "question": "Quel format d'√©change est utilis√© par d√©faut dans une API REST ?",
    "options": [
      "YAML",
      "JSON",
      "Protobuf",
      "CSV"
    ],
    "answer": "JSON",
    "explanation": "Les APIs REST utilisent g√©n√©ralement le format JSON car il est l√©ger, lisible et largement support√©."
  },
  {
    "question": "Qu‚Äôest-ce qu‚Äôune API stateless ?",
    "options": [
      "Qui utilise des identifiants",
      "Qui conserve l'√©tat de session",
      "Qui n'a pas de s√©curit√©",
      "Qui ne conserve pas l'√©tat entre les requ√™tes"
    ],
    "answer": "Qui ne conserve pas l'√©tat entre les requ√™tes",
    "explanation": "Une API stateless ne stocke pas d'informations de session ; chaque requ√™te contient toutes les infos n√©cessaires √† son traitement."
  },
  {
    "question": "Quel protocole est utilis√© par gRPC ?",
    "options": [
      "HTTP/1.1",
      "SOAP",
      "HTTP/2",
      "FTP"
    ],
    "answer": "HTTP/2",
    "explanation": "gRPC utilise HTTP/2 pour permettre des communications rapides, bidirectionnelles et multiplex√©es entre services."
  },
  {
    "question": "Pourquoi utiliser gRPC plut√¥t que REST ?",
    "options": [
      "Car il est bas√© sur XML",
      "Car il est plus lent",
      "Pour des communications internes tr√®s rapides",
      "Pour remplacer SOAP"
    ],
    "answer": "Pour des communications internes tr√®s rapides",
    "explanation": "gRPC est optimis√© pour des appels entre services internes gr√¢ce √† HTTP/2 et Protobuf."
  },
  {
    "question": "Que contient un fichier .proto en gRPC ?",
    "options": [
      "Le code source du serveur",
      "La d√©finition des routes REST",
      "La documentation API",
      "La d√©finition des messages et services"
    ],
    "answer": "La d√©finition des messages et services",
    "explanation": "Un fichier `.proto` d√©finit les types de messages et les services (RPC) utilis√©s dans une application gRPC."
  }
  ],
  avance: [
    {
    "question": "Quel est le r√¥le principal de Git dans un projet logiciel ?",
    "options": [
      "G√©rer les d√©ploiements automatiques",
      "Assurer la s√©curit√© du code source",
      "Suivre les modifications et versions du code",
      "Compiler les programmes"
    ],
    "answer": "Suivre les modifications et versions du code",
    "explanation": "Git est un syst√®me de versionnage distribu√© qui permet de suivre l‚Äô√©volution du code, g√©rer des branches et fusionner les modifications en toute s√©curit√©."
  },
  {
    "question": "Que signifie CI dans CI/CD ?",
    "options": [
      "Code Integration",
      "Continuous Integration",
      "Centralized Integration",
      "Checked Integration"
    ],
    "answer": "Continuous Integration",
    "explanation": "CI signifie 'Continuous Integration', un processus d‚Äôautomatisation permettant de tester et valider du code √† chaque modification dans le d√©p√¥t."
  },
  {
    "question": "Quel fichier d√©clenche les workflows dans GitHub Actions ?",
    "options": [
      ".gitlab-ci.yml",
      "docker-compose.yml",
      "workflow.json",
      ".github/workflows/*.yml"
    ],
    "answer": ".github/workflows/*.yml",
    "explanation": "Les workflows GitHub Actions sont d√©finis dans des fichiers YAML plac√©s dans le dossier `.github/workflows/`."
  },
  {
    "question": "Quel composant n'est pas propre √† un pipeline CI/CD ?",
    "options": [
      "Jobs",
      "Branches",
      "Stages",
      "Runners"
    ],
    "answer": "Branches",
    "explanation": "Les branches appartiennent √† Git, pas directement aux pipelines CI/CD qui se composent plut√¥t de jobs, stages et runners."
  },
  {
    "question": "Quelle est la diff√©rence entre GitHub Actions et GitLab CI/CD ?",
    "options": [
      "GitLab CI est uniquement pour Python",
      "GitHub Actions est propri√©taire de GitLab",
      "GitHub Actions est int√©gr√© √† GitHub, GitLab CI est int√©gr√© √† GitLab",
      "GitHub Actions ne permet pas le d√©ploiement"
    ],
    "answer": "GitHub Actions est int√©gr√© √† GitHub, GitLab CI est int√©gr√© √† GitLab",
    "explanation": "GitHub Actions fonctionne dans GitHub, tandis que GitLab CI/CD est natif de GitLab. Tous deux permettent tests et d√©ploiement via des fichiers YAML."
  },
  {
    "question": "Quel format d'√©change est utilis√© par d√©faut dans une API REST ?",
    "options": [
      "YAML",
      "JSON",
      "Protobuf",
      "CSV"
    ],
    "answer": "JSON",
    "explanation": "Les APIs REST utilisent g√©n√©ralement le format JSON car il est l√©ger, lisible et largement support√©."
  },
  {
    "question": "Qu‚Äôest-ce qu‚Äôune API stateless ?",
    "options": [
      "Qui utilise des identifiants",
      "Qui conserve l'√©tat de session",
      "Qui n'a pas de s√©curit√©",
      "Qui ne conserve pas l'√©tat entre les requ√™tes"
    ],
    "answer": "Qui ne conserve pas l'√©tat entre les requ√™tes",
    "explanation": "Une API stateless ne stocke pas d'informations de session ; chaque requ√™te contient toutes les informations n√©cessaires."
  },
  {
    "question": "Quel protocole est utilis√© par gRPC ?",
    "options": [
      "HTTP/1.1",
      "SOAP",
      "HTTP/2",
      "FTP"
    ],
    "answer": "HTTP/2",
    "explanation": "gRPC utilise HTTP/2 pour permettre des communications rapides, bidirectionnelles et multiplex√©es entre services."
  },
  {
    "question": "Pourquoi utiliser gRPC plut√¥t que REST ?",
    "options": [
      "Car il est bas√© sur XML",
      "Car il est plus lent",
      "Pour des communications internes tr√®s rapides",
      "Pour remplacer SOAP"
    ],
    "answer": "Pour des communications internes tr√®s rapides",
    "explanation": "gRPC est optimis√© pour des appels entre services internes gr√¢ce √† HTTP/2 et Protobuf."
  },
  {
    "question": "Que contient un fichier .proto en gRPC ?",
    "options": [
      "Le code source du serveur",
      "La d√©finition des routes REST",
      "La documentation API",
      "La d√©finition des messages et services"
    ],
    "answer": "La d√©finition des messages et services",
    "explanation": "Un fichier `.proto` d√©finit les types de messages et les services (RPC) utilis√©s dans une application gRPC."
  },
  {
    "question": "Qu'est-ce que SQL ?",
    "options": [
      "Un syst√®me de fichiers",
      "Un langage de programmation orient√© objet",
      "Un langage pour interroger des bases de donn√©es relationnelles",
      "Un protocole r√©seau s√©curis√©"
    ],
    "answer": "Un langage pour interroger des bases de donn√©es relationnelles",
    "explanation": "SQL (Structured Query Language) est utilis√© pour lire, ins√©rer, mettre √† jour et supprimer des donn√©es dans des bases relationnelles."
  },
  {
    "question": "Quel mot-cl√© SQL permet de joindre plusieurs tables ?",
    "options": [
      "MERGE",
      "COMBINE",
      "JOIN",
      "ATTACH"
    ],
    "answer": "JOIN",
    "explanation": "JOIN est utilis√© pour combiner des lignes provenant de deux ou plusieurs tables, en utilisant une condition commune."
  },
  {
    "question": "Quel est l'int√©r√™t de cr√©er un index sur une colonne en SQL ?",
    "options": [
      "Gagner de l'espace disque",
      "Acc√©l√©rer les requ√™tes de lecture",
      "Prot√©ger la colonne contre les suppressions",
      "Ajouter des permissions utilisateur"
    ],
    "answer": "Acc√©l√©rer les requ√™tes de lecture",
    "explanation": "Un index acc√©l√®re les op√©rations de lecture en r√©duisant le nombre de lignes √† scanner dans la table."
  },
  {
    "question": "Quel est le r√¥le de la clause WHERE dans une requ√™te SQL ?",
    "options": [
      "Filtrer les lignes selon une condition",
      "Cr√©er une table temporaire",
      "Ajouter une colonne √† la table",
      "Lier deux bases de donn√©es"
    ],
    "answer": "Filtrer les lignes selon une condition",
    "explanation": "La clause WHERE permet de sp√©cifier des conditions sur les lignes √† s√©lectionner ou √† modifier."
  },
  {
    "question": "Quelle commande permet d‚Äôins√©rer une ligne dans une table ?",
    "options": [
      "INSERT",
      "ADD",
      "UPDATE",
      "SELECT"
    ],
    "answer": "INSERT",
    "explanation": "INSERT INTO permet d‚Äôajouter de nouvelles lignes dans une table existante."
  },
  {
    "question": "Que signifie l'acronyme ACID ?",
    "options": [
      "Association, Coh√©rence, Index, Durabilit√©",
      "Atomicit√©, Coh√©rence, Isolation, Durabilit√©",
      "Autonomie, Coh√©rence, Inversion, Disponibilit√©",
      "Accessibilit√©, Connexion, Ind√©pendance, Disponibilit√©"
    ],
    "answer": "Atomicit√©, Coh√©rence, Isolation, Durabilit√©",
    "explanation": "ACID est un ensemble de propri√©t√©s qui garantissent la fiabilit√© des transactions dans une base de donn√©es."
  },
  {
    "question": "Pourquoi choisir PostgreSQL pour un projet open source ?",
    "options": [
      "Car il est payant",
      "Pour sa compatibilit√© avec Excel",
      "Pour ses performances, sa richesse fonctionnelle et sa licence libre",
      "Car il est uniquement compatible Windows"
    ],
    "answer": "Pour ses performances, sa richesse fonctionnelle et sa licence libre",
    "explanation": "PostgreSQL est une base robuste, riche en types avanc√©s, et tr√®s utilis√©e dans les projets open source."
  },
  {
    "question": "Dans une base relationnelle, une cl√© primaire sert √† :",
    "options": [
      "Lier deux tables entre elles",
      "Identifier de mani√®re unique chaque ligne d'une table",
      "Cr√©er une nouvelle colonne",
      "Sauvegarder la table automatiquement"
    ],
    "answer": "Identifier de mani√®re unique chaque ligne d'une table",
    "explanation": "La cl√© primaire permet d‚Äôassurer l‚Äôunicit√© et l‚Äôint√©grit√© des donn√©es d‚Äôune table."
  },
  {
    "question": "Quelle clause permet de trier les r√©sultats d'une requ√™te SQL ?",
    "options": [
      "SORT BY",
      "ORDER BY",
      "GROUP BY",
      "FILTER"
    ],
    "answer": "ORDER BY",
    "explanation": "ORDER BY trie les r√©sultats d‚Äôune requ√™te selon une ou plusieurs colonnes, en ordre croissant ou d√©croissant."
  },
  {
    "question": "Quelle clause SQL regroupe les lignes ayant des valeurs identiques ?",
    "options": [
      "UNION",
      "MERGE",
      "GROUP BY",
      "COLLECT"
    ],
    "answer": "GROUP BY",
    "explanation": "GROUP BY regroupe les lignes par valeur commune, souvent utilis√©e avec des fonctions d‚Äôagr√©gation comme COUNT ou SUM."
  },
  ]
};


// Timer
const Timer = ({ timeLeft }) => (
  <p className="timer">‚è≥ Temps restant : <span>{timeLeft}s</span></p>
);

// Composant QCM
const QuestionCard = ({ question, options, onAnswerClick, timeLeft }) => (
  <div className="question-card">
    <h4>üí° {question}</h4>
    <Timer timeLeft={timeLeft} />
    <div className="options-container">
      {options.map((option, index) => (
        <button key={index} onClick={() => onAnswerClick(option, index)} className="option-button">
          {String.fromCharCode(65 + index)}.{option}
        </button>
      ))}
    </div>
  </div>
);

// Composant Flashcard
const Flashcard = ({ slide, index, total }) => (
  <div className="question-card" style={{ fontSize: '14px', margin: '0' }}>
    {/* <h5>üß† Flashcard {index + 1} / {total}</h5> */}
    <strong>Question :</strong>
    <pre style={{ margin: '0', padding: '4px', background: '#f5f5f5', borderRadius: '3px', overflowX: 'auto' }}>
      <code style={{ fontFamily: 'monospace', whiteSpace: 'pre-wrap', lineHeight: '0.4' }}>
        {slide.question}
      </code>
    
    </pre>
    <strong>R√©ponse :</strong> {slide.answer}
  </div>
);




// Composant R√©sultat
const Results = ({ scores }) => {
  const totalScore = scores.moyen + scores.avance;
  const totalQuestions = Object.values(questions).flat().length;
  return (
    <div className="results">
      <h3>üéØ Score final : {totalScore} / {totalQuestions}</h3>
      <p>‚úÖ Niveau Moyen : {scores.moyen}</p>
      <p>‚úÖ Niveau Avanc√© : {scores.avance}</p>
      {totalScore > 3 ? (
        <h3 className="success">üöÄ Excellent travail ! Vous ma√Ætrisez bien les Produits !</h3>
      ) : (
        <p className="fail">üìö R√©visez encore un peu pour bien comprendre les concepts, ou retournez voir les flashcards !</p>
      )}
    </div>
  );
};

// Page principale
const Page2 = () => {
  const [level, setLevel] = useState("basic");
  const [currentSlide, setCurrentSlide] = useState(0);
  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [scores, setScores] = useState({ moyen: 0, avance: 0 });
  const [timeLeft, setTimeLeft] = useState(20);
  const [showResult, setShowResult] = useState(false);
  const [message, setMessage] = useState("");

  // Timer pour les niveaux QCM
  useEffect(() => {
    if (level !== "basic" && !showResult && timeLeft > 0) {
      const timer = setTimeout(() => setTimeLeft(timeLeft - 1), 1000);
      return () => clearTimeout(timer);
    } else if (level !== "basic" && timeLeft === 0) {
      handleNextQuestion();
    }
  }, [timeLeft, level, showResult]);

  // Slide auto pour les flashcards
  useEffect(() => {
    if (level === "basic" && !showResult) {
      const interval = setInterval(() => {
        setCurrentSlide((prev) => {
          if (prev + 1 < basicSlides.length) {
            return prev + 1;
          } else {
            setLevel("moyen");
            setCurrentQuestion(0);
            setTimeLeft(20);
            return 0;
          }
        });
      }, 10000);
      return () => clearInterval(interval);
    }
  }, [level, showResult]);

const handleAnswerClick = (option, index) => {
  const currentQuestions = questions[level];
  const current = currentQuestions[currentQuestion];
  const correctAnswer = current.answer;

  const isCorrect =
    /^[A-D]$/.test(correctAnswer) // Si c‚Äôest une lettre
      ? index === correctAnswer.charCodeAt(0) - 65
      : option === correctAnswer; // Sinon compare le texte

  if (isCorrect) {
    setScores((prevScores) => ({ ...prevScores, [level]: prevScores[level] + 1 }));
    setMessage("‚úÖ Correct !");
  } else {
    setMessage(`‚ùå Incorrect ! La bonne r√©ponse √©tait : ${correctAnswer}\n ‚ÑπÔ∏è ${current.explanation}`);
  }

  setTimeout(handleNextQuestion, 2500);
};

  const handleNextQuestion = () => {
    const currentQuestions = questions[level];
    if (currentQuestion + 1 < currentQuestions.length) {
      setCurrentQuestion(currentQuestion + 1);
      setTimeLeft(20);
      setMessage("");
    } else {
      if (level === "moyen") {
        setLevel("avance");
      } else {
        setShowResult(true);
      }
      setCurrentQuestion(0);
      setTimeLeft(20);
      setMessage("");
    }
  };

  return (
    <div className="qcm-container">
      {showResult ? (
        <Results scores={scores} />
      ) : (
        <div>
          <h4 className="subtitle" style={{ fontSize: '10px', margin: '0' }}>
              Fixed Inc! üîπ Niveau : {level.toUpperCase()}
          </h4>

          {level === "basic" ? (
            <Flashcard slide={basicSlides[currentSlide]} index={currentSlide} total={basicSlides.length} />
          ) : (
            <QuestionCard
              question={questions[level][currentQuestion].question}
              options={questions[level][currentQuestion].options}
              onAnswerClick={handleAnswerClick}
              timeLeft={timeLeft}
            />
          )}

          {message && <p className="message">{message}</p>}
        </div>
      )}
    </div>
  );
};

export default Page2;